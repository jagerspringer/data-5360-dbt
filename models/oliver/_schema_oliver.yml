version: 2

models:
  - name: oliver_dim_customer
    description: "Customer Dimension (cust_key + natural customer_id, name/contact/state)."

  - name: oliver_dim_employee
    description: "Employee Dimension (employee_key + HR attributes like hire_date and position)."

  - name: oliver_dim_product
    description: "Product Dimension (product_key, product_id, name, description)."
    columns:
      - name: product_key
        tests:
          - unique

  - name: oliver_dim_store
    description: "Store Dimension (store_key + store name and location)."

  - name: oliver_dim_date
    description: "Date Dimension generated via dbt_date (dayofweek, month, quarter, year)."

  - name: oliver_fact_sales
    description: "POS line-level Sales Fact (cust_key, date_key, store_key, product_key, employee_key; quantity, dollars_sold, unit_price)."
    columns:
      - name: product_key
        description: "A foreign key to the product dimension"
        tests:
          - not_null

  - name: stg_employee_certifications
    description: |
      Staging model for employee certifications.
      Each record represents a certification awarded to an employee.
    columns:
      - name: certification_name
        tests:
          - accepted_values:
              values:
                - "Food Handler"
                - "ServSafe Manager"
                - "Barista Level 1"
                - "Barista Level 2"
                - "First Aid/CPR"

  - name: fact_certification
    description: |
      Certification Fact.
      The grain of this table is employee + certification + date.
      Each record represents a certification awarded to an employee on a given date.
    columns:
      - name: employee_key
        tests:
          - relationships:
              to: ref('oliver_dim_employee') # the model you want to compare to
              field: employee_key            # the field on the model you want to compare to
